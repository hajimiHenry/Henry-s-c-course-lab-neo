# 编程题讲义：级数求和与精度控制

> 目标：处理“交错/递推/无限级数”的核心不是公式，而是：如何生成每一项 + 何时停止 + 如何保证输出精度。

## 1. 两种常见终止条件
### 1.1 固定项数
题目给 `n`，求前 `n` 项：
```c
sum = 0;
for (i = 1; i <= n; i++) sum += term(i);
```

### 1.2 给定精度 `eps`
当下一项的绝对值小于 `eps` 时停止：
```c
sum = 0;
term = 第一项;
while (fabs(term) >= eps) {
    sum += term;
    term = 下一项;  /* 用递推更快更稳 */
}
```

## 2. 交错级数（正负交替）怎么写最稳
常见正负号控制：
- 用符号变量 `sign`：初始 `+1`，每次乘以 `-1`
```c
sign = 1;
for (...) {
    sum += sign * term;
    sign = -sign;
}
```

## 3. 优先使用“递推生成项”，少用 `pow`
如果每一项之间有固定关系，递推通常更快、更不易引入浮点误差。例如：
- 分子/分母乘以某个表达式
- 项与项之间只差一个常数因子

思路：先写出 `term(i+1)` 与 `term(i)` 的关系。

## 4. 浮点输出的要点
- 输出保留多少位由 `printf` 控制：`%.2f` 等
- 算法停止条件用 `fabs(term) < eps` 这类形式

## 5. 自检清单
- 初始项是否正确？（第一项非常关键）
- 终止条件是否会死循环？（`term` 是否在逼近 0）
- 是否需要 `double` 而不是 `float`？
- 输出精度是否与题目一致？

