# 24_结构体统计与淘汰规则codex

这道题看起来信息很多，但做起来可以拆成固定流程：
`读入 10 人 → 计算年销量 → 找男/女最差 → 算平均 → 按规则输出`。

下面是我们从 0 做到现在用到的所有关键点（也对应你写代码时最容易卡住的地方）。

## 1. 数据怎么存：结构体 + 结构体数组
把“一个销售员”的信息打包成一个结构体 `Emp`：
- `name`：名字（最多 20 个字符，所以开 21）
- `gender`：性别（样例是单个字符 `m/f`）
- `annual`：年销量（四季度之和）

结构体数组 `Emp a[10];` 的意思是：`a` 有 10 个格子，每个格子是一名员工的完整信息包。

## 2. 输入怎么读：`scanf` + `%c` 前的空格
样例输入每行是：`name gender q1 q2 q3 q4`，其中 `gender` 是一个字符。

推荐读法（重点：`%c` 前的空格，用来吃掉换行/空格）：
```c
scanf("%20s %c %d %d %d %d", a[i].name, &a[i].gender, &q1, &q2, &q3, &q4);
```

## 3. 为什么有的要 `&` 有的不用
我们反复确认过的“最关键一条”：
- `a[i].gender` 是单个 `char` 变量，`scanf` 要写进去，所以要地址：`&a[i].gender`
- `a[i].name` 是 `char[21]` 数组，数组名本身就会“退化”为首元素地址，直接写 `a[i].name` 就行，别写 `&a[i].name`

## 4. 找“最差男/最差女”：下标 + 哨兵值 `-1` + `<=`
用两个下标记录当前最差是谁：
- `worstMale = -1`：表示“还没遇到任何男员工”
- `worstFemale = -1`：表示“还没遇到任何女员工”

更新规则用 `<=`：这样如果最差出现并列，就会用“后出现的”覆盖“先出现的”，满足题目“并列淘汰输入顺序靠后的”。

## 5. 平均值与输出顺序（按样例）
平均值：题目固定 10 人，所以直接 `avg = total / 10`，是整数除法（自动去掉小数，不四舍五入）。

样例输出的格式要对齐：
- 淘汰行是 `male: 姓名 年销量` / `female: 姓名 年销量`
- 平均行是 `the annual aver is 平均值`
- 超过平均：`姓名 年销量`
- 超过平均的输出顺序：先按输入顺序输出所有男，再按输入顺序输出所有女

## 6. `if` vs `else if`：哪里该用，哪里不该用
读入循环里统计/更新最差时，男/女是互斥的，建议：
`if (男) { ... } else if (女) { ... }`

但最后输出淘汰行时，男、女可能都需要输出两行，所以必须是两个独立 `if`：
`if (malecount > 1) ...;`
`if (femcount > 1) ...;`

## 7. “浮点错误（Floating point exception）”一般是啥
在 C 里这类报错最常见原因其实是：整数除以 0。

这题里典型触发方式：你写了 `avg = total / (malecount + femcount);`，但由于性别没读对（比如 `%c` 吃到了换行），导致计数都是 0，分母变成 0 就炸了。

规避方法：
- 这题直接写 `avg = total / 10;`
- 并保证 `scanf` 用 `"%20s %c ..."`（`%c` 前有空格）

## 8. 最小可用流程（背下来就能写出来）
1) 循环 10 次读入，算 `annual`，累加 `total`
2) 同时统计 `malecount/femcount`，同时维护 `worstMale/worstFemale`
3) `avg = total / 10`
4) `if (malecount > 1)` 输出 male 淘汰行；`if (femcount > 1)` 输出 female 淘汰行
5) 输出 `the annual aver is avg`
6) 两遍循环输出超过平均：先男后女（都保持输入顺序）