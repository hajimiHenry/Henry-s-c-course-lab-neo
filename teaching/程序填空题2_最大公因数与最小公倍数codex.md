# 程序填空题第2题讲义：最大公因数与最小公倍数（欧几里得算法）

对应题目位置：`程序填空题题干/程序填空题-题干汇总.md` 第 2 题《找出最大公因子和最小公倍数》。

---

## 1. 这题要你输出什么

输入两个正整数 `m` 和 `n`（注意输入格式是带逗号：`scanf("%d,%d", &m, &n)`）。

输出两件事（中间空格隔开）：

- **最大公因数/最大公约数**：`gcd(m, n)`（能同时整除 `m` 和 `n` 的最大正整数）
- **最小公倍数**：`lcm(m, n)`（能同时被 `m` 和 `n` 整除的最小正整数）

---

## 2. 先把算法当“机器”用：三句更新在做什么

题目核心循环是：

```c
do {
    r = m % n;
    m = n;
    n = r;
} while (n);
```

你可以把它当成一个“不断缩小问题”的机器：

- `r = m % n;`：算余数（`m` 除以 `n` 剩下多少）
- `m = n;`：把旧的 `n` 提升为新的第一个数
- `n = r;`：把余数变成新的第二个数

也就是把问题从 `(m, n)` 变成 `(n, m % n)`，一直重复，直到 `n` 变成 0。

**结论（先记住）：循环结束时的 `m` 就是最大公因数。**

---

## 3. 为啥这样更新不会把“最大公因数”弄丢（最直白版）

把除法写成“商和余数”的形式：

- `m = q*n + r`，其中 `r = m % n`

现在看“公因数”会不会变：

1) 如果某个数 `d` 能同时整除 `m` 和 `n`  
那它也能整除 `m - q*n`，而 `m - q*n = r`  
所以 `d` 也能同时整除 `n` 和 `r`

2) 反过来，如果 `d` 能同时整除 `n` 和 `r`  
那它也能整除 `q*n + r`，而 `q*n + r = m`  
所以 `d` 也能同时整除 `m` 和 `n`

两边“能同时整除的数”一模一样，所以最大的那个也一样：

> `gcd(m, n) = gcd(n, m % n)`

这就是欧几里得算法成立的原因。

---

## 4. 为啥一定会停，而且停下来的 `m` 就是答案

关键事实：当 `n != 0` 时，`m % n` 的范围是：

- `0 <= m % n < n`

也就是每轮更新后的新 `n`（余数）一定比旧 `n` 更小（但不为负），所以 `n` 会一路变小，最后必然变成 0。

当 `n == 0` 时，说明“上一步的余数为 0”，也就是“此时的 `m` 能整除上一步的 `n`”。最后一个非 0 的数就是最大公因数，所以循环结束 `m` 就是 `gcd`。

---

## 5. 用一个例子把每一轮的 `m,n,r` 写出来

例如输入 `48,18`：

| 轮次 | 旧 m | 旧 n | r = m % n | 更新后 m | 更新后 n |
|---:|---:|---:|---:|---:|---:|
| 1 | 48 | 18 | 12 | 18 | 12 |
| 2 | 18 | 12 | 6  | 12 | 6  |
| 3 | 12 | 6  | 0  | 6  | 0  |

停在 `n == 0`，此时 `m == 6`，所以 `gcd(48,18) = 6`。

---

## 6. 最小公倍数 `lcm` 为什么可以用 `s / gcd`

题目在读入后立刻做了：

```c
s = m * n;
```

这里 `s` 表示“原始输入两个数的乘积”（注意：后面 `m,n` 会被算法更新改写）。

数学恒等式（只要记住它）：

> `m*n = gcd(m,n) * lcm(m,n)`

所以：

> `lcm(m,n) = (m*n) / gcd(m,n)`

题里循环结束后 `m` 就是 `gcd`，而 `s` 还是原来的 `m*n`，因此最后输出第二个数写：

> `s / m`

---

## 7. 回到本题：5 个空分别填什么（按原题顺序）

原题片段（你看到的空）：

```c
s=m*n;
if(m<n)
  【 ① 】
do {
    r=【 ② 】;
    m=【 ③ 】;
    n=【 ④ 】;
} while(n);
printf("%d %d\n", m, 【 ⑤ 】);
```

标准填写：

1) **① 交换（保证 m>=n）**：
```c
{ r = m; m = n; n = r; }
```

2) **② 余数**：
```c
m % n
```

3) **③ 把 n 交给 m**：
```c
n
```

4) **④ 把余数交给 n**：
```c
r
```

5) **⑤ 最小公倍数**：
```c
s / m
```

---

## 8. 填空题最常错的点（做前 10 秒检查）

- **输入格式有逗号**：必须是 `scanf("%d,%d", &m, &n)`，输入也要像 `48,18` 这样带逗号。
- **更新顺序不能乱**：一定是先算 `r`，再 `m=n`，再 `n=r`。
- **输出别写反**：`printf` 第一个是 `m`（gcd），第二个是 `s/m`（lcm）。
- **溢出提示（了解即可）**：`s=m*n` 可能溢出 `int`；如果题目数据很大应改 `long long`，但填空题一般按题目类型走。

