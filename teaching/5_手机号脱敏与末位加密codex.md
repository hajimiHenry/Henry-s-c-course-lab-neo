# 5_手机号脱敏与末位加密codex

## 题目要做什么（读题翻译）
给你 `n` 个手机号（每个长度固定为 11），再给你：
- 一个替换字符 `C`（保证是“非数字字符”）
- 两个下标 `N`、`M`（从 **0 开始**）

你要把每个手机号处理成一个“加密后的字符串”，每个结果占一行。

处理规则分两步：
1. **脱敏替换**：把下标在 `[N, M]` 的字符全部替换成 `C`。
2. **末位加密（有条件）**：如果最后一位（下标 10）**没有被替换**，则要对最后一位再做一次处理：
   - 计算“最终显示字符串”中 **所有仍是数字的字符** 的数字和 `S`（注意：`C` 不是数字，要跳过）
   - 如果 `S` 是素数：新最后一位 = `(原最后一位数字 + S) % 10`
   - 否则：新最后一位 = `S % 10`

如果最后一位（下标 10）在 `[N, M]` 内已经被替换成 `C`，那就 **不做第 2 步**（题意是“最后一位如果没有被替换，才做特殊加密处理”）。

---

## 关键知识点

### 1）手机号必须按“字符串”处理
手机号是 11 位数字，但不能用 `int/long long` 读：
- 位数太长可能溢出
- 你要“替换其中几位”，这本质是字符操作

正确做法：
- 用 `char s[12];` 存 11 位 + `'\0'`
- 用 `scanf("%s", s);` 读入

### 2）数组下标从 0 开始
长度 11 的字符串下标是 `0..10`：
- `s[0]`：第 1 位
- `s[10]`：第 11 位（最后一位）

### 3）把字符数字变成数值
字符 `'0'..'9'` 转成数字：
- `digit = s[i] - '0';`

判断是不是数字字符（推荐写法）：
- `if (s[i] >= '0' && s[i] <= '9')`

### 4）素数判断（初学者版）
`S` 是素数的条件：
- `S < 2` 不是素数
- 从 `2` 检查到 `i*i <= S`，如果有 `S % i == 0` 就不是素数

---

## 样例怎么理解（用一行讲清“为什么末位变了”）
以样例中的：`15690374232`，假设 `C='*'，N=2，M=4`：
1. 先替换 2..4 位：得到 `15***374232`
2. 最后一位没被替换（下标 10 不在 2..4），所以计算显示数字和：
   - 数字有：1+5+3+7+4+2+3+2 = 27（`*` 跳过）
3. 27 不是素数，所以新末位 = `27 % 10 = 7`
4. 最终输出：`15***374237`

---

## 推荐解题步骤（通用模板）
对每个手机号字符串 `s`：
1. 复制一份或直接在原串上改：把 `i=N..M` 的 `s[i]` 改成 `C`
2. 如果 `10` 不在 `[N,M]`：
   - 扫描 `s[0..10]`，把仍是数字字符的加起来得到 `S`
   - 计算新末位并写回 `s[10]`
3. 打印 `s`

---

## 伪代码（把逻辑写清楚）
```text
读 n
循环读入 n 个字符串 phone[i]
读 C, N, M

for each phone:
  for i in [N..M]:
    phone[i] = C

  if NOT (N <= 10 <= M):
    S = 0
    for i in [0..10]:
      if phone[i] is digit:
        S += phone[i]-'0'
    if isPrime(S):
      last = ( (phone[10]-'0') + S ) % 10
    else:
      last = S % 10
    phone[10] = last + '0'

  print phone
```

---

## 常见坑（你写代码时最容易错的点）
1. **用 `%d` 读手机号**：会错（必须 `%s`）。
2. **忘了字符串结尾 `'\0'`**：数组要开到 12。
3. **下标搞混**：题目明确“下标从 0 开始”，末位是下标 10。
4. **求和时把替换字符也当数字**：`C` 不是数字，必须跳过。
5. **素数判断边界**：`0、1` 不是素数；`2` 是素数。
6. **末位被替换时还去加密**：不符合题意（只在“末位未被替换”时加密）。

---

## C 代码实现提示（不直接给整题答案也能写出来）
- 读字符 `C` 时建议：`scanf(" %c%d%d", &C, &N, &M);`（`%c` 前的空格用于跳过换行）
- `is_prime(int x)` 函数按“`i*i <= x`”写，避免用 `sqrt`（更简单、也不容易忘头文件）
- `n<=10` 可以直接用：`char phone[10][12];`

如果你愿意，我可以按你现在的 `Henry-s-c-course-lab-neo/final-review/5.c` 的风格，手把手带你把每一步写出来（先把输入读对，再实现替换，再实现求和与素数判断）。
