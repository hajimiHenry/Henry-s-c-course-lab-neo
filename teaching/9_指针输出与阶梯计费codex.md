你已经把题目拆成了“折扣 / 单价 / 时间分段”三块，思路是对的。这份讲义把本题用到的知识点和最小改动修复点整理成一张清单，方便你以后遇到类似题直接套用。

## 1 题目要做什么（结论版）
输入四个整数 `T S U N`：
- `T`：是否特殊车辆（1 表示特殊车辆，停车费为 0）
- `S`：是否重点区域（决定三个阶梯的小时单价）
- `U`：ETC 类型（决定折扣系数）
- `N`：停车时长（小时，题目给的是整数）

输出：应缴停车费（浮点数，保留 2 位小数）。

## 2 本题核心思路（按计算流程走）
1. 先判断 `T==1`：直接输出 `0.00`
2. 否则根据 `S` 确定三个阶梯的单价 `price1/price2/price3`
3. 根据 `N` 把时长拆成三段小时数 `time1/time2/time3`
4. 计算原价：`base = time1*price1 + time2*price2 + time3*price3`
5. 根据 `U` 得到折扣系数 `rate`
6. 最终金额：`total = base * rate`，输出 `%.2f`（或 `%.2lf`）

## 3 本题用到的 C 语言知识点
### 3.1 值传递 vs 指针（输出参数）
- 普通参数（例如 `int x`、`double rate`）是“值传递”：函数拿到的是一份副本。
- 如果希望函数把结果“写回”到调用者变量里，需要传入地址：`&变量`，并在函数里用 `*指针` 修改。

本题里这些都属于“需要写回”的结果：
- `rate`（折扣系数）
- `price1/price2/price3`（三个阶梯单价）
- `time1/time2/time3`（三个阶梯的小时数）

### 3.2 函数声明（原型）
在 `main` 之前调用函数，需要先写函数声明，例如：
```c
void checkETC(int U, double *rate);
```
这能让编译器知道参数类型，避免“隐式声明”导致的错误或警告。

### 3.3 阶梯计费的分段写法
本题的时间分段（常见写法之一）：
- `N<=2`：全在第一段
- `2<N<=3`：第一段 2 小时 + 第二段 `N-2` 小时
- `N>3`：第一段 2 小时 + 第二段 1 小时 + 第三段 `N-3` 小时

### 3.4 输出格式
题目要求保留两位小数：
```c
printf("%.2f", total);
```
`double` 用 `%.2f` 也可以正常输出（`printf` 会把 `float` 自动提升为 `double`）。

## 4 你这题最容易错的地方（对照检查）
1. 在函数里给形参赋值，但主函数变量没变（值传递导致的）
2. 忘了在 `main` 前写函数声明，导致编译错误/警告
3. 分段条件写成多个 `if`，导致多个分支同时执行；更稳的是 `if / else if / else`
4. `void` 函数里写 `return 0;` 这类不匹配写法（应避免）

## 5 本题“最小改动修复”的关键改法（记住这一套）
把“要写回去的参数”改成指针：
- 调用时：`f(..., &x);`
- 函数内：`*x = ...;`

示例（折扣系数）：
```c
void checkETC(int U, double *rate) {
    if (U == 0) *rate = 1.00;
    else if (U == 1) *rate = 0.88;
    else if (U == 2) *rate = 0.90;
    else if (U == 3) *rate = 0.95;
}
```

## 6 自测清单（跑通即达标）
- 输入 `1 1 2 2` 输出 `0.00`
- 输入 `0 1 2 6` 输出 `79.20`
- 边界测试：`N=2`、`N=3`、`N=4` 三个点都能正确分段

## 7 Windows 下快速喂输入的小技巧（可选）
PowerShell 可以用管道输入：
```powershell
echo "0 1 2 6" | .\9.exe
```
不要使用 `<< EOF` 这种写法，它是类 Linux shell 的语法，在 PowerShell 里会报错。
